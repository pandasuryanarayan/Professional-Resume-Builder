<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Resume Builder</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            /* Optional: background-image: url('Resume.jpg'); */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
        }

        /* Glassmorphism Container */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        /* Utility: Fade Animation */
        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Utility: Custom Scrollbar */
        textarea::-webkit-scrollbar { width: 8px; }
        textarea::-webkit-scrollbar-track { background: #f1f1f1; }
        textarea::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        textarea::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* Marquee styling */
        .marquee-container {
            overflow: hidden;
            white-space: nowrap;
            background-color: rgba(254, 243, 199, 0.5); /* Light yellow tint */
            padding: 5px 0;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        .marquee-content {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 20s linear infinite;
            color: #b45309; /* Dark yellow/orange */
            font-weight: 500;
        }
        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4">

    <!-- APP CONTAINER -->
    <div id="app-container" class="w-full max-w-3xl glass-panel rounded-2xl overflow-hidden relative fade-in">
        
        <!-- HEADER MODULE -->
        <div id="header-section" class="hidden bg-slate-800 text-white p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold"><i class="fas fa-file-alt mr-2"></i>Resume Builder</h2>
                <span id="step-indicator" class="text-sm font-medium bg-slate-700 px-3 py-1 rounded-full">Step 1 of 3</span>
            </div>
            <!-- Progress Bar -->
            <div class="w-full bg-slate-700 rounded-full h-2.5">
                <div id="progress-bar" class="bg-green-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
        </div>

        <div class="p-8 md:p-10">

            <!-- VIEW: Landing Page -->
            <div id="step-landing" class="step-view text-center py-6">
                <!-- Restored Marquee -->
                <div class="marquee-container mb-6">
                    <div class="marquee-content">
                        More features will be rollout in the upcoming days. Till then experience our Simplicitic <strong>Resume Builder</strong>.
                    </div>
                </div>

                <div class="mb-4 inline-block p-4 bg-green-100 rounded-full text-green-600">
                    <i class="fas fa-id-card text-5xl"></i>
                </div>
                <h1 class="text-4xl font-extrabold text-slate-800 mb-2">Resume Builder</h1>
                <p class="text-slate-600 mb-8 max-w-lg mx-auto text-lg font-medium">
                    Create a Professional Resume with Ease
                </p>

                <!-- Restored "Why Choose Us" Content -->
                <div class="text-left max-w-2xl mx-auto bg-white/50 p-6 rounded-xl border border-slate-200 mb-8 shadow-sm">
                    <h2 class="text-xl font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2">Why Choose Our Resume Builder?</h2>
                    <p class="text-slate-600 mb-4 text-sm">Unlock endless possibilities with our easy-to-use Resume Builder. Craft a standout resume and land your dream job.</p>
                    
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mt-1 mr-3 min-w-[16px]"></i><span class="text-slate-700 text-sm">Intuitive interface for effortless resume creation.</span></li>
                        <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mt-1 mr-3 min-w-[16px]"></i><span class="text-slate-700 text-sm">Guided steps to capture your personal and educational details.</span></li>
                        <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mt-1 mr-3 min-w-[16px]"></i><span class="text-slate-700 text-sm">Generate a polished and professional resume at the click of a button.</span></li>
                        <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mt-1 mr-3 min-w-[16px]"></i><span class="text-slate-700 text-sm">Download your resume in PDF format for easy sharing.</span></li>
                        <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mt-1 mr-3 min-w-[16px]"></i><span class="text-slate-800 font-semibold text-sm">No Credit Card Required. No Payment. No login. No Signup.</span></li>
                        <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mt-1 mr-3 min-w-[16px]"></i><span class="text-slate-800 font-semibold text-sm">Only Enter Your Details and Resume is done.</span></li>
                    </ul>
                    
                    <p class="text-slate-600 italic text-center font-medium">Start building your future now. Click on "Create Resume" to begin.</p>
                </div>

                <button onclick="App.navigateTo(1)" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-10 rounded-lg transition shadow-lg text-lg transform hover:-translate-y-1">
                    Create Resume <i class="fas fa-arrow-right ml-2"></i>
                </button>
                
                <div class="mt-8 text-xs text-slate-400 border-t pt-4">
                    &copy; 2024 Resume Builder - by Suryanarayan Panda. All rights reserved.
                </div>
            </div>

            <!-- VIEW: Personal Info Form -->
            <div id="step-personal" class="step-view hidden">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 border-b pb-2">Personal Information</h2>
                <form id="form-personal" class="space-y-4">
                    <div>
                        <label class="block text-slate-700 font-semibold mb-2" for="fullName">Full Name</label>
                        <input type="text" name="fullName" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition" placeholder="Surname Yourname Father's Name Mother's Name" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-slate-700 font-semibold mb-2" for="email">Email</label>
                            <input type="email" name="email" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition" placeholder="john@example.com" required>
                        </div>
                        <div>
                            <label class="block text-slate-700 font-semibold mb-2" for="phone">Phone</label>
                            <input type="number" name="phone" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition" placeholder="Mobile Number" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-slate-700 font-semibold mb-2" for="address">Address</label>
                        <textarea name="address" rows="3" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition resize-none" placeholder="Full Address" required></textarea>
                    </div>
                    <div class="flex justify-between mt-8 pt-4">
                        <button type="button" onclick="App.navigateTo(0)" class="text-slate-500 hover:text-slate-700 font-semibold px-4 py-2">Home</button>
                        <button type="button" onclick="App.validateAndProceed(1, 'form-personal')" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition shadow-md">Next <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>
                </form>
            </div>

            <!-- VIEW: Education Form -->
            <div id="step-education" class="step-view hidden">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 border-b pb-2">Education</h2>
                <form id="form-education" class="space-y-4">
                    <div>
                        <label class="block text-slate-700 font-semibold mb-2" for="university">University</label>
                        <input type="text" name="university" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition" placeholder="University Name" required>
                    </div>
                    <div>
                        <label class="block text-slate-700 font-semibold mb-2" for="degree">Degree</label>
                        <input type="text" name="degree" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition" placeholder="Degree with Year" required>
                    </div>
                    <div>
                        <label class="block text-slate-700 font-semibold mb-2" for="graduationDate">Graduation Year</label>
                        <input type="text" name="graduationDate" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition" placeholder="Month and Year separated by space" required>
                    </div>
                    <div class="flex justify-between mt-8 pt-4">
                        <button type="button" onclick="App.navigateTo(1)" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-2 px-6 rounded-lg transition"><i class="fas fa-arrow-left mr-2"></i> Back</button>
                        <button type="button" onclick="App.validateAndProceed(2, 'form-education')" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition shadow-md">Next <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>
                </form>
            </div>

            <!-- VIEW: Extra Info Form -->
            <div id="step-extra" class="step-view hidden">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 border-b pb-2">Extra Information</h2>
                <form id="form-extra" class="space-y-4">
                    <div>
                        <label class="block text-slate-700 font-semibold mb-2" for="skills">Skills</label>
                        <textarea name="skills" rows="4" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition resize-none" placeholder="Enter Skills" required></textarea>
                    </div>
                    <div>
                        <label class="block text-slate-700 font-semibold mb-2" for="actHob">Activities/Hobbies</label>
                        <textarea name="actHob" rows="4" class="form-input w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 outline-none transition resize-none" placeholder="Enter Activities/Hobbies" required></textarea>
                    </div>
                    <div class="flex justify-between mt-8 pt-4">
                        <button type="button" onclick="App.navigateTo(2)" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-2 px-6 rounded-lg transition"><i class="fas fa-arrow-left mr-2"></i> Back</button>
                        <button type="button" onclick="App.validateAndProceed(3, 'form-extra')" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition shadow-md">Generate Resume <i class="fas fa-magic ml-1"></i></button>
                    </div>
                </form>
            </div>

            <!-- VIEW: Preview & Download -->
            <div id="step-preview" class="step-view hidden">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-slate-800">Generated Resume</h2>
                    <p class="text-slate-600">Review and download.</p>
                </div>

                <div id="preview-paper" class="bg-white border border-slate-200 rounded shadow-lg p-8 max-w-2xl mx-auto mb-8 text-left transition-all hover:shadow-xl">
                    <!-- Dynamic Content Injected Here by UIManager -->
                    <div class="border-b-2 border-slate-800 pb-4 mb-4">
                        <h1 class="text-3xl font-bold text-slate-900 uppercase" data-bind="fullName"></h1>
                        <div class="text-sm text-slate-600 mt-2 flex flex-wrap gap-4">
                            <span><i class="fas fa-envelope mr-1"></i> <span data-bind="email"></span></span>
                            <span><i class="fas fa-phone mr-1"></i> <span data-bind="phone"></span></span>
                            <span class="block w-full"><i class="fas fa-map-marker-alt mr-1"></i> <span data-bind="address"></span></span>
                        </div>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-slate-800 border-b border-slate-300 mb-2 uppercase">Education</h3>
                        <div class="mb-2">
                            <p class="text-slate-600 font-semibold">University:</p>
                            <p class="text-slate-800 ml-2" data-bind="university"></p>
                        </div>
                        <div class="mb-2">
                            <p class="text-slate-600 font-semibold">Degree:</p>
                            <p class="text-slate-800 ml-2" data-bind="degree"></p>
                        </div>
                        <div class="mb-2">
                            <p class="text-slate-600 font-semibold">Graduation Date:</p>
                            <p class="text-slate-800 ml-2" data-bind="graduationDate"></p>
                        </div>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-slate-800 border-b border-slate-300 mb-2 uppercase">Extra Information</h3>
                        <div class="mb-2">
                            <p class="text-slate-600 font-semibold">Skills:</p>
                            <p class="text-slate-800 ml-2" data-bind="skills"></p>
                        </div>
                        <div class="mb-2">
                            <p class="text-slate-600 font-semibold">Activities/Hobbies:</p>
                            <p class="text-slate-800 ml-2" data-bind="actHob"></p>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col md:flex-row justify-center gap-4">
                    <button type="button" onclick="App.navigateTo(3)" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-3 px-6 rounded-lg transition">Edit Data</button>
                    <button type="button" onclick="App.download()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg transition shadow-lg transform hover:-translate-y-1">Download PDF</button>
                    <button type="button" onclick="App.navigateTo(0)" class="bg-red-50 hover:bg-red-100 text-red-600 font-bold py-3 px-6 rounded-lg transition">Home</button>
                </div>
            </div>

        </div>
    </div>

    <!-- TOAST COMPONENT -->
    <div id="toast" class="fixed bottom-5 right-5 bg-red-500 text-white px-6 py-3 rounded-lg shadow-xl transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-3 z-50">
        <i class="fas fa-exclamation-circle"></i>
        <span id="toast-message"></span>
    </div>

    <!-- MODULAR JAVASCRIPT ARCHITECTURE -->
    <script>
        /**
         * ------------------------------------------------------------------
         * MODULE 1: StorageService
         * Responsibility: Handle saving/loading state from sessionStorage
         * ------------------------------------------------------------------
         */
        const StorageService = {
            KEY: 'resume_builder_data',
            
            save(data) {
                try {
                    sessionStorage.setItem(this.KEY, JSON.stringify(data));
                } catch (e) {
                    console.error("Storage failed:", e);
                }
            },

            load() {
                try {
                    const data = sessionStorage.getItem(this.KEY);
                    return data ? JSON.parse(data) : null;
                } catch (e) {
                    console.error("Load failed:", e);
                    return null;
                }
            },

            clear() {
                sessionStorage.removeItem(this.KEY);
            }
        };

        /**
         * ------------------------------------------------------------------
         * MODULE 2: PDFService
         * Responsibility: Generate PDF using jsPDF based on provided data
         * ------------------------------------------------------------------
         */
        const PDFService = {
            generate(data) {
                if (!window.jspdf) {
                    alert("PDF Library not loaded properly.");
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Config
                const margin = 20;
                let y = 20;
                const pageWidth = doc.internal.pageSize.getWidth();
                const maxW = pageWidth - (margin * 2);

                // Helper: Text Writing
                const writeText = (text, size, weight = 'normal', color = [0,0,0]) => {
                    doc.setFontSize(size);
                    doc.setFont('helvetica', weight);
                    doc.setTextColor(...color);
                    const lines = doc.splitTextToSize(text || '', maxW);
                    doc.text(lines, margin, y);
                    // Approx line height calculation
                    y += (lines.length * size * 0.3527 * 1.2) + 2; 
                };

                // Helper: Section Header
                const writeHeader = (title) => {
                    y += 5;
                    doc.setDrawColor(200);
                    doc.line(margin, y, pageWidth - margin, y);
                    y += 7;
                    writeText(title.toUpperCase(), 12, 'bold', [60, 60, 60]);
                    y += 1;
                };

                // 1. Header Info
                writeText(data.fullName, 22, 'bold', [40, 40, 60]);
                y -= 2;
                writeText(`Address: ${data.address}`, 10, 'normal', [100, 100, 100]);
                writeText(`Email: ${data.email}`, 10, 'normal', [100, 100, 100]);
                writeText(`Phone: ${data.phone}`, 10, 'normal', [100, 100, 100]);
                y += 5;

                // 2. Education
                writeHeader('Education');
                writeText(`University: ${data.university}`, 11, 'normal', [0, 0, 0]);
                writeText(`Degree: ${data.degree}`, 11, 'normal', [0, 0, 0]);
                writeText(`Graduation Date: ${data.graduationDate}`, 11, 'normal', [0, 0, 0]);

                // 3. Extra Information
                writeHeader('Extra Information');
                writeText(`Skills: ${data.skills}`, 11);
                writeText(`Activities/Hobbies: ${data.actHob}`, 11);

                // Footer
                doc.setFontSize(8);
                doc.setTextColor(150);
                doc.text("Generated by Resume Builder", pageWidth/2, doc.internal.pageSize.getHeight() - 10, { align: 'center' });

                // Download
                doc.save(`${data.fullName.replace(/\s+/g, '_')}_Resume.pdf`);
            }
        };

        /**
         * ------------------------------------------------------------------
         * MODULE 3: UIManager
         * Responsibility: DOM manipulation, View Switching, Toast Notifications
         * ------------------------------------------------------------------
         */
        const UIManager = {
            views: ['step-landing', 'step-personal', 'step-education', 'step-extra', 'step-preview'],
            
            elements: {
                header: document.getElementById('header-section'),
                progressBar: document.getElementById('progress-bar'),
                stepText: document.getElementById('step-indicator'),
                toast: document.getElementById('toast'),
                toastMsg: document.getElementById('toast-message')
            },

            // Populate form inputs from state
            populateInputs(state) {
                document.querySelectorAll('input, textarea').forEach(input => {
                    if (state[input.name]) input.value = state[input.name];
                });
            },

            // Collect data from a specific form ID
            getFormData(formId) {
                const form = document.getElementById(formId);
                if (!form) return {};
                const formData = new FormData(form);
                return Object.fromEntries(formData.entries());
            },

            // Switch visible section
            showView(index) {
                // Hide all
                this.views.forEach(id => {
                    const el = document.getElementById(id);
                    el.classList.add('hidden');
                    el.classList.remove('fade-in');
                });

                // Show current
                const active = document.getElementById(this.views[index]);
                active.classList.remove('hidden');
                void active.offsetWidth; // Trigger reflow for animation
                active.classList.add('fade-in');

                // Update Header
                this.updateHeader(index);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            },

            updateHeader(index) {
                if (index === 0) {
                    this.elements.header.classList.add('hidden');
                } else {
                    this.elements.header.classList.remove('hidden');
                    let pct = 0;
                    if (index === 1) pct = 33;
                    if (index === 2) pct = 66;
                    if (index >= 3) pct = 100;
                    
                    this.elements.progressBar.style.width = `${pct}%`;
                    this.elements.stepText.innerText = index === 4 ? 'Preview' : `Step ${index} of 3`;
                }
            },

            // Update Preview HTML based on binding attributes
            renderPreview(state) {
                const binds = document.querySelectorAll('[data-bind]');
                binds.forEach(el => {
                    const key = el.getAttribute('data-bind');
                    if (state[key]) el.innerText = state[key];
                });
            },

            showToast(msg, type = 'error') {
                this.elements.toastMsg.innerText = msg;
                this.elements.toast.className = `fixed bottom-5 right-5 text-white px-6 py-3 rounded-lg shadow-xl transform transition-all duration-300 flex items-center gap-3 z-50 ${type === 'success' ? 'bg-green-600' : 'bg-red-500'}`;
                
                // Show
                requestAnimationFrame(() => {
                    this.elements.toast.classList.remove('translate-y-20', 'opacity-0');
                });

                // Hide after 3s
                setTimeout(() => {
                    this.elements.toast.classList.add('translate-y-20', 'opacity-0');
                }, 3000);
            },

            validateForm(formId) {
                const form = document.getElementById(formId);
                const inputs = form.querySelectorAll('input, textarea');
                let valid = true;

                inputs.forEach(input => {
                    if (!input.checkValidity()) {
                        valid = false;
                        input.classList.add('border-red-500');
                        input.addEventListener('input', () => input.classList.remove('border-red-500'), { once: true });
                    }
                });
                return valid;
            }
        };

        /**
         * ------------------------------------------------------------------
         * MODULE 4: App (Controller)
         * Responsibility: Application Logic, State Management, Initialization
         * ------------------------------------------------------------------
         */
        const App = {
            state: {
                fullName: '', email: '', phone: '', address: '',
                university: '', degree: '', graduationDate: '',
                skills: '', actHob: ''
            },

            init() {
                // Load data
                const saved = StorageService.load();
                if (saved) {
                    this.state = { ...this.state, ...saved };
                    UIManager.populateInputs(this.state);
                }
            },

            navigateTo(stepIndex) {
                UIManager.showView(stepIndex);
                if (stepIndex === 4) { // Preview step
                    UIManager.renderPreview(this.state);
                }
            },

            validateAndProceed(currentStepIndex, formId) {
                if (UIManager.validateForm(formId)) {
                    // Harvest data
                    const newData = UIManager.getFormData(formId);
                    this.updateState(newData);
                    this.navigateTo(currentStepIndex + 1);
                } else {
                    UIManager.showToast('Please fill out all required fields.');
                }
            },

            updateState(newData) {
                this.state = { ...this.state, ...newData };
                StorageService.save(this.state);
            },

            download() {
                try {
                    PDFService.generate(this.state);
                    UIManager.showToast('Resume downloaded!', 'success');
                } catch (e) {
                    console.error(e);
                    UIManager.showToast('Error generating PDF.');
                }
            },

            reset() {
                if (confirm('Clear all data and start over?')) {
                    StorageService.clear();
                    location.reload();
                }
            }
        };

        // Bootstrap the App
        window.addEventListener('load', () => App.init());

    </script>
</body>
</html>
